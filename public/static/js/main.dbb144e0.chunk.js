(this["webpackJsonpreact-rails-api-project-template-client"]=this["webpackJsonpreact-rails-api-project-template-client"]||[]).push([[0],{20:function(e,t,n){},21:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n(14),a=n.n(s),r=(n(20),n(15)),l=n(3),i=(n(21),n(5)),o=n(2),j=n(0);var b=function(e){var t=e.user,n=e.setUser;return Object(j.jsx)("div",{children:Object(j.jsxs)("nav",{class:"navbar navbar-light bg-light",children:[Object(j.jsxs)("a",{class:"",href:"#",children:[Object(j.jsx)("a",{href:"/",children:"Home"})," \xa0",Object(j.jsx)("a",{href:"/complaints/new",children:"New Complaint"})," \xa0",Object(j.jsx)("a",{href:"/complaints/",children:"All Complaints"})," \xa0"]}),t?Object(j.jsx)("button",{class:"nav-link",onClick:function(){fetch("/logout",{method:"DELETE"}).then((function(e){e.ok&&(console.log("logged out"),n(null))}))},children:"Logout"}):Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("ul",{children:[Object(j.jsx)("a",{href:"/",children:"Login"})," \xa0",Object(j.jsx)("a",{href:"/signup",children:"Signup"})," \xa0"]})})]})})};var u=function(e){var t=e.user;return e.setUser,Object(j.jsx)("div",{class:"container",children:Object(j.jsxs)("h2",{children:["Welcome, ",t.username,"!"]})})},d=n(6),O=n(7),h=function(){var e=Object(c.useState)({username:"",password:""}),t=Object(l.a)(e,2),n=t[0],s=t[1],a=function(e){s(Object(O.a)(Object(O.a)({},n),{},Object(d.a)({},e.target.name,e.target.value)))};return Object(j.jsxs)("div",{class:"container",children:[Object(j.jsx)("h2",{children:"Log In"}),Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=Object(O.a)({},n);fetch("/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){console.log(e),s({username:"",password:""})}))},children:[Object(j.jsx)("label",{htmlFor:"username",children:"Username: "}),Object(j.jsx)("input",{id:"username-input",type:"text",name:"username",value:n.username,onChange:a}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),Object(j.jsx)("label",{htmlFor:"password",children:"Password: "}),Object(j.jsx)("input",{id:"password-input",type:"password",name:"password",value:n.password,onChange:a}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),Object(j.jsx)("button",{id:"btn-submit",type:"submit",onChange:a,children:"Login"})]}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),Object(j.jsx)(i.c,{to:"/signup",replace:!0,children:"Don't have an account? Sign up!"})]})};var p=function(e){e.setUser;var t=Object(c.useState)({username:"",email:"",password:""}),n=Object(l.a)(t,2),s=n[0],a=n[1];function r(e){a(Object(O.a)(Object(O.a)({},s),{},Object(d.a)({},e.target.name,e.target.value)))}return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("div",{class:"container",children:Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=Object(O.a)({},s);fetch("/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){console.log(e),a({username:"",email:"",password:""})}))},className:"complaint-block",children:[Object(j.jsx)("h2",{children:"Signup Here!"}),Object(j.jsx)("label",{htmlFor:"username",children:"Username: "}),Object(j.jsx)("input",{id:"username-signup-input",type:"text",name:"username",value:s.username,onChange:r}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),Object(j.jsx)("label",{htmlFor:"email",children:"Email: "}),Object(j.jsx)("input",{id:"email-signup-input",type:"text",name:"email",value:s.email,onChange:r}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),Object(j.jsx)("label",{htmlFor:"password",children:"Password: "}),Object(j.jsx)("input",{id:"password-signup-input",type:"password",name:"password",value:s.password,onChange:r}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),Object(j.jsx)("button",{type:"submit",children:"Submit"}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),Object(j.jsx)(i.b,{to:"/login",replace:!0,children:"Have an account already? Log in!"})]})})})};var m=function(e){var t=e.setUser;return Object(c.useEffect)((function(){o.a}),[]),Object(j.jsx)("div",{children:Object(j.jsx)(o.d,{children:Object(j.jsx)(o.b,{exact:!0,path:"/",element:Object(j.jsx)(h,{setUser:t})})})})};var x=function(){return Object(j.jsx)("header",{class:"container",children:Object(j.jsx)("h1",{})})},f=function(e){var t=e.complaints,n=Object(c.useState)(""),s=Object(l.a)(n,2),a=s[0],r=s[1],i=Object(c.useState)(""),o=Object(l.a)(i,2),b=o[0],u=o[1],O=Object(c.useState)(""),h=Object(l.a)(O,2),p=h[0],m=h[1],x=Object(c.useState)(""),f=Object(l.a)(x,2),g=f[0],v=f[1],C=Object(c.useState)([]),S=Object(l.a)(C,2),y=S[0],w=S[1];return Object(c.useEffect)((function(){fetch("/categories").then((function(e){return e.json()})).then((function(e){w(e)}))}),[]),Object(j.jsxs)("div",{class:"container",children:[Object(j.jsx)("h2",{id:"complaint",children:"Submit a Complaint"}),Object(j.jsx)("div",{className:"form-complaint",children:Object(j.jsxs)("form",{class:"form-group",onSubmit:function(e){e.preventDefault();var n={title:a,desc:b,date_observed:p,category_name:g};fetch("/complaints/new",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){return e.json()})).then(console.log),r([t,n]),u(""),m(""),v(0)},children:[Object(j.jsx)("label",{htmlFor:"complaint-title",children:"Title:"}),Object(j.jsx)("input",Object(d.a)({class:"form-control",id:"complaint-title",placeholder:"Title",onChange:function(e){r(e.target.value)},value:a},"placeholder","Title details")),Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),Object(j.jsx)("label",{htmlFor:"select-cat",children:"Select Complaint Category:"}),Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("select",{onChange:function(e){v(e.target.value)},children:[Object(j.jsx)("option",{option:!0,value:0,children:" Category "}),y.map((function(e){return Object(j.jsxs)("option",{value:e.category,children:[" ",e.category]})}))]})}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),Object(j.jsx)("label",{htmlFor:"formControlTextarea1",children:"Complaint Description:"}),Object(j.jsx)("textarea",Object(d.a)({class:"form-control",id:"exampleFormControlTextarea1",rows:"3",placeholder:"Enter complaint details",onChange:function(e){u(e.target.value)},value:b},"placeholder","Description details")),Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),Object(j.jsxs)("div",{class:"form-group",children:[Object(j.jsx)("label",{htmlFor:"formControlInput1",children:"Complaint Date:"}),Object(j.jsx)("input",{type:"date",class:"form-control",id:"exampleFormControlInput1",onChange:function(e){m(e.target.value)},value:p,placeholder:"Date details"})]}),Object(j.jsx)("br",{}),Object(j.jsx)("button",{type:"submit",id:"sbt-btn",children:"Submit Complaint"})]})})]})};var g=function(e){var t=e.complaintsObj,n=e.deleteComplaintRequest,c=e.updateComplaint;return console.log("complaintObjTitle ",t.title),Object(j.jsx)("div",{class:"card",children:Object(j.jsxs)("div",{class:"card-body",children:[Object(j.jsxs)("h5",{class:"card-title",children:["Title: ",t.title]}),Object(j.jsx)("p",{class:"card-text",children:t.desc}),Object(j.jsx)("p",{class:"card-text",children:t.date_observed}),Object(j.jsx)("button",{class:"btn btn-primary",onClick:function(){n(t.id)},children:"Delete"}),"\xa0",Object(j.jsx)("button",{class:"btn btn-primary",onClick:function(){c(t.id)},children:"Edit"})]})})};var v=function(e){var t=e.complaints,n=e.handleDeleteComplaint,c=e.handleEditComplaint;return console.log("ALL complaints ",t),Object(j.jsxs)("div",{className:"container",children:[Object(j.jsx)("h2",{children:"All Complaints"}),Object(j.jsx)("div",{className:"card-body",children:t.map((function(e){return Object(j.jsx)(g,{complaintsObj:e,deleteComplaintRequest:n,updateComplaint:c},e.id)}))})]})};var C=function(){var e=Object(c.useState)(null),t=Object(l.a)(e,2),n=t[0],s=t[1];console.log("Current User ",n);var a=Object(c.useState)(!1),d=Object(l.a)(a,2),O=d[0];d[1],console.log("authenticated ",O);var g=Object(c.useState)([]),C=Object(l.a)(g,2),S=C[0],y=C[1],w=Object(c.useState)([]),F=Object(l.a)(w,2),T=F[0];F[1],console.log("Users ",T),Object(c.useEffect)((function(){fetch("/complaints").then((function(e){return e.json()})).then((function(e){console.log("complaintsFetchedData: ",e),y(e)})),fetch("/me").then((function(e){e.ok&&e.json().then((function(e){return s(e)}))}))}),[]);var D=Object(c.useState)(""),E=Object(l.a)(D,2),U=(E[0],E[1],Object(c.useState)("")),k=Object(l.a)(U,2),L=(k[0],k[1],Object(c.useState)("")),N=Object(l.a)(L,2);return N[0],N[1],Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("div",{className:"App-header",children:[Object(j.jsx)(b,{user:n,setUser:s}),Object(j.jsx)(x,{}),Object(j.jsx)(i.a,{children:Object(j.jsxs)(o.d,{children:[Object(j.jsx)(o.b,{path:"/",element:n?Object(j.jsx)(u,{setUser:s,user:n}):Object(j.jsxs)(j.Fragment,{children:[" ",Object(j.jsx)(m,{setUser:s})]})}),Object(j.jsx)(o.b,{path:"/login",element:Object(j.jsx)(h,{})}),Object(j.jsx)(o.b,{path:"/signup",element:Object(j.jsx)(p,{})}),Object(j.jsx)(o.b,{path:"/complaints/new",element:Object(j.jsx)(f,{})}),Object(j.jsx)(o.b,{path:"/complaints",element:Object(j.jsx)(v,{complaints:S,handleDeleteComplaint:function(e){var t=S.filter((function(t){return t.id!==e}));y(Object(r.a)(t)),fetch("/complaints/".concat(e),{method:"DELETE"})},handleUpdateComplaint:function(e){S.filter((function(t){return t.id==e}))}})})]})})]})})};n(23),n(24);a.a.render(Object(j.jsx)(C,{}),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.dbb144e0.chunk.js.map